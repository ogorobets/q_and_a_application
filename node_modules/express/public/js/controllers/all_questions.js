'use strict';

module.exports = ['$scope', '$http', '$stateParams', '$cookies', 'Search', 'IoOperations',
    function($scope, $http, $stateParams, $cookies, Search, IoOperations) {
    $scope.search = Search.searchStr;
    IoOperations.send('get-questions', { questionsType: $stateParams.questions_type }, function(response) {
        var questions = [];
        var questionsObj;
        for (var i = 0; i < response.length; i++) {
            questionsObj = {};
            questionsObj['_id'] = response[i]._id;
            questionsObj['answersAmount'] = response[i].answer_ids.length;
            questionsObj['summary'] = response[i].title;
            questionsObj['tags'] = response[i].tags;
            questionsObj['author'] = response[i].author.user_name;
            questions.push(questionsObj);
        }
        $scope.questions = questions;
        console.log('questions = ', questions);
        console.log(response);
    }, function(response) {
        // errors
        console.log('ERROR: ', response);
    });
}];