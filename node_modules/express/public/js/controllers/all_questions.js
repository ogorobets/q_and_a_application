'use strict';

module.exports = ['$scope', '$http', '$stateParams', '$cookies', 'Search', function($scope, $http, $stateParams, $cookies, Search) {
    $scope.search = Search.searchStr;
    $http.get('/get-questions', { params: {questionsType: $stateParams.questions_type} }).
        then(function(response) {
            var questions = [];
            var questionsObj;
            for (var i = 0; i < response.data.length; i++) {
                questionsObj = {};
                questionsObj['_id'] = response.data[i]._id;
                questionsObj['answersAmount'] = response.data[i].answer_ids.length;
                questionsObj['summary'] = response.data[i].title;
                questionsObj['tags'] = response.data[i].tags;
                questionsObj['author'] = response.data[i].author.user_name;
                questions.push(questionsObj);
            }
            $scope.questions = questions;
            console.log('questions = ', questions);
            console.log(response);
        }, function(response) {
            // errors
            console.log('ERROR: ', response);
        });
}];